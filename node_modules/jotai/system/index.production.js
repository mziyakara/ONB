System.register(["react"],function(_){"use strict";var $,G,k,H,J,I,K,Q,X;return{setters:[function(g){$=g.createContext,G=g.useState,k=g.useEffect,H=g.useRef,J=g.createElement,I=g.useContext,K=g.useReducer,Q=g.useDebugValue,X=g.useCallback}],execute:function(){_({atom:de,useAtom:pe,useAtomValue:re,useSetAtom:se});const g=Symbol(),Y=i=>!!i[g],ae=i=>!i[g].c,C=i=>{var u;const{b:l,c:a}=i[g];a&&(a(),(u=ee.get(l))==null||u())},O=(i,u)=>{const l=i[g].o,a=u[g].o;return l===a||i===a||Y(l)&&O(l,u)},Z=(i,u)=>{const l={b:i,o:u,c:null},a=new Promise(d=>{l.c=()=>{l.c=null,d()},u.finally(l.c)});return a[g]=l,a},ee=new WeakMap,Pe=_("SECRET_INTERNAL_registerPromiseAbort",(i,u)=>{ee.set(i,u)}),W=i=>"init"in i,N="r",x="w",V="c",D="s",le="h",te=i=>{const u=new WeakMap,l=new WeakMap,a=new Map;if(i)for(const[t,e]of i){const r={v:e,r:0,y:!0,d:new Map};u.set(t,r)}const d=new WeakMap,p=(t,e,r)=>{let n=d.get(e);n||(n=new Map,d.set(e,n)),r.then(()=>{n.get(t)===r&&(n.delete(t),n.size||d.delete(e))}),n.set(t,r)},m=t=>{const e=new Set,r=d.get(t);return r&&(d.delete(t),r.forEach((n,o)=>{C(n),e.add(o)})),e},w=new WeakMap,b=t=>{let e=w.get(t);return e||(e=new Map,w.set(t,e)),e},v=(t,e)=>{if(t){const r=b(t);let n=r.get(e);return n||(n=v(t.p,e),n&&r.set(e,n)),n}return u.get(e)},y=(t,e,r)=>{if(t)b(t).set(e,r);else{const n=u.get(e);u.set(e,r),a.has(e)||a.set(e,n)}},S=(t,e=new Map,r)=>{if(!r)return e;const n=new Map;let o=!1;return r.forEach(s=>{var c;const f=((c=v(t,s))==null?void 0:c.r)||0;n.set(s,f),e.get(s)!==f&&(o=!0)}),e.size===n.size&&!o?e:n},h=(t,e,r,n,o)=>{const s=v(t,e);if(s){if(o&&(!("p"in s)||!O(s.p,o)))return s;"p"in s&&C(s.p)}const c={v:r,r:(s==null?void 0:s.r)||0,y:!0,d:S(t,s==null?void 0:s.d,n)};let f=!(s!=null&&s.y);return!s||!("v"in s)||!Object.is(s.v,r)?(f=!0,++c.r,c.d.has(e)&&(c.d=new Map(c.d).set(e,c.r))):c.d!==s.d&&(c.d.size!==s.d.size||!Array.from(c.d.keys()).every(M=>s.d.has(M)))&&(f=!0,Promise.resolve().then(()=>{T(t)})),s&&!f?s:(y(t,e,c),c)},E=(t,e,r,n,o)=>{const s=v(t,e);if(s){if(o&&(!("p"in s)||!O(s.p,o)))return s;"p"in s&&C(s.p)}const c={e:r,r:((s==null?void 0:s.r)||0)+1,y:!0,d:S(t,s==null?void 0:s.d,n)};return y(t,e,c),c},R=(t,e,r,n)=>{const o=v(t,e);if(o&&"p"in o){if(O(o.p,r))return o.y?o:{...o,y:!0};C(o.p)}p(t,e,r);const s={p:r,r:((o==null?void 0:o.r)||0)+1,y:!0,d:S(t,o==null?void 0:o.d,n)};return y(t,e,s),s},z=(t,e,r,n)=>{if(r instanceof Promise){const o=Z(r,r.then(s=>{h(t,e,s,n,o)}).catch(s=>{if(s instanceof Promise)return Y(s)?s.then(()=>{P(t,e,!0)}):s;E(t,e,s,n,o)}));return R(t,e,o,n)}return h(t,e,r,n)},ve=(t,e)=>{const r=v(t,e);if(r){const n={...r,y:!1};y(t,e,n)}},P=(t,e,r)=>{if(!r){const o=v(t,e);if(o){if(o.y&&"p"in o&&!ae(o.p))return o;if(o.d.forEach((s,c)=>{if(c!==e)if(!l.has(c))P(t,c);else{const f=v(t,c);f&&!f.y&&P(t,c)}}),Array.from(o.d).every(([s,c])=>{const f=v(t,s);return f&&!("p"in f)&&f.r===c}))return o.y?o:{...o,y:!0}}}const n=new Set;try{const o=e.read(s=>{n.add(s);const c=s===e?v(t,s):P(t,s);if(c){if("e"in c)throw c.e;if("p"in c)throw c.p;return c.v}if(W(s))return s.init;throw new Error("no atom init")});return z(t,e,o,n)}catch(o){if(o instanceof Promise){const s=Z(o,o);return R(t,e,s,n)}return E(t,e,o,n)}},we=(t,e)=>P(e,t),he=(t,e)=>{let r=l.get(e);return r||(r=F(t,e)),r},q=(t,e)=>!e.l.size&&(!e.t.size||e.t.size===1&&e.t.has(t)),Ee=(t,e)=>{const r=l.get(e);r&&q(e,r)&&U(t,e)},B=(t,e)=>{const r=l.get(e);r==null||r.t.forEach(n=>{n!==e&&(ve(t,n),B(t,n))})},oe=(t,e,r)=>{let n=!0;const o=(f,M)=>{const A=P(t,f);if("e"in A)throw A.e;if("p"in A){if(M!=null&&M.unstable_promise)return A.p.then(()=>o(f,M));throw A.p}if("v"in A)return A.v;throw new Error("no value found")},s=(f,M)=>{let A;if(f===e){if(!W(f))throw new Error("atom not writable");m(f).forEach(ue=>{ue!==t&&z(ue,f,M)});const Me=v(t,f),be=z(t,f,M);Me!==be&&B(t,f)}else A=oe(t,f,M);return n||T(t),A},c=e.write(o,s,r);return n=!1,c},ce=(t,e,r)=>{const n=oe(r,t,e);return T(r),n},ge=t=>!!t.write,F=(t,e,r)=>{const n={t:new Set(r&&[r]),l:new Set};if(l.set(e,n),P(void 0,e).d.forEach((o,s)=>{const c=l.get(s);c?c.t.add(e):s!==e&&F(t,s,e)}),ge(e)&&e.onMount){const o=c=>ce(e,c,t),s=e.onMount(o);t=void 0,s&&(n.u=s)}return n},U=(t,e)=>{var r;const n=(r=l.get(e))==null?void 0:r.u;n&&n(),l.delete(e);const o=v(t,e);o&&("p"in o&&C(o.p),o.d.forEach((s,c)=>{if(c!==e){const f=l.get(c);f&&(f.t.delete(e),q(c,f)&&U(t,c))}}))},ie=(t,e,r,n)=>{const o=new Set(r.d.keys());n==null||n.forEach((s,c)=>{if(o.has(c)){o.delete(c);return}const f=l.get(c);f&&(f.t.delete(e),q(c,f)&&U(t,c))}),o.forEach(s=>{const c=l.get(s);c?c.t.add(e):l.has(e)&&F(t,s,e)})},T=t=>{if(t){b(t).forEach((e,r)=>{const n=u.get(r);if(e!==n){const o=l.get(r);o==null||o.l.forEach(s=>s(t))}});return}for(;a.size;){const e=Array.from(a);a.clear(),e.forEach(([r,n])=>{const o=v(void 0,r);if(o&&o.d!==(n==null?void 0:n.d)&&ie(void 0,r,o,n==null?void 0:n.d),n&&!n.y&&(o==null?void 0:o.y))return;const s=l.get(r);s==null||s.l.forEach(c=>c())})}},me=t=>{b(t).forEach((e,r)=>{const n=u.get(r);(!n||e.r>n.r||e.y!==n.y||e.r===n.r&&e.d!==n.d)&&(u.set(r,e),e.d!==(n==null?void 0:n.d)&&ie(t,r,e,n==null?void 0:n.d))})},ye=(t,e)=>{e&&me(e),T(void 0)},Se=(t,e,r)=>{const n=he(r,t).l;return n.add(e),()=>{n.delete(e),Ee(r,t)}},Ae=(t,e)=>{for(const[r,n]of t)W(r)&&(z(e,r,n),B(e,r));T(e)};return{[N]:we,[x]:ce,[V]:ye,[D]:Se,[le]:Ae}},_e=_("unstable_createStore",i=>{const u=te(i),l=d=>{const p=u[N](d);if("e"in p)throw p.e;if(!("p"in p))return p.v},a=d=>new Promise((p,m)=>{const w=u[N](d);"e"in w?m(w.e):"p"in w?p(w.p.then(()=>a(d))):p(w.v)});return{get:l,asyncGet:a,set:(d,p)=>u[x](d,p),sub:(d,p)=>u[D](d,p),SECRET_INTERNAL_store:u}}),ne=(i,u)=>({s:u?u(i).SECRET_INTERNAL_store:te(i)}),L=new Map,j=_("SECRET_INTERNAL_getScopeContext",i=>(L.has(i)||L.set(i,$(ne())),L.get(i))),Ce=_("Provider",({children:i,initialValues:u,scope:l,unstable_createStore:a,unstable_enableVersionedWrite:d})=>{const[p,m]=G({});k(()=>{const v=w.current;v.w&&(v.s[V](null,p),delete p.p,v.v=p)},[p]);const w=H();if(!w.current){const v=ne(u,a);if(d){let y=0;v.w=S=>{m(h=>{const E=y?h:{p:h};return S(E),E})},v.v=p,v.r=S=>{++y,S(),--y}}w.current=v}const b=j(l);return J(b.Provider,{value:w.current},i)});let fe=0;function de(i,u){const l=`atom${++fe}`,a={toString:()=>l};return typeof i=="function"?a.read=i:(a.init=i,a.read=d=>d(a),a.write=(d,p,m)=>p(a,typeof m=="function"?m(d(a)):m)),u&&(a.write=u),a}function re(i,u){const l=j(u),a=I(l),{s:d,v:p}=a,m=h=>{const E=d[N](i,h);if("e"in E)throw E.e;if("p"in E)throw E.p;if("v"in E)return E.v;throw new Error("no atom value")},[[w,b,v],y]=K((h,E)=>{const R=m(E);return Object.is(h[1],R)&&h[2]===i?h:[E,R,i]},p,h=>{const E=m(h);return[h,E,i]});let S=b;return v!==i&&(y(w),S=m(w)),k(()=>{const{v:h}=a;h&&d[V](i,h);const E=d[D](i,y,h);return y(h),E},[d,i,a]),k(()=>{d[V](i,w)}),Q(S),S}function se(i,u){const l=j(u),{s:a,w:d}=I(l);return X(p=>{const m=w=>a[x](i,p,w);return d?d(m):m()},[a,d,i])}function pe(i,u){return"scope"in i&&(console.warn("atom.scope is deprecated. Please do useAtom(atom, scope) instead."),u=i.scope),[re(i,u),se(i,u)]}}}});
