System.register(["react","jotai"],function($){"use strict";var M,R,_,j,m,V,I,k;return{setters:[function(p){M=p.useContext,R=p.useState,_=p.useEffect,j=p.useDebugValue,m=p.useRef,V=p.useCallback},function(p){I=p.SECRET_INTERNAL_getScopeContext,k=p.useAtom}],execute:function(){$({useAtomDevtools:W,useAtomsDevtools:ne,useAtomsSnapshot:Q,useGotoAtomsSnapshot:Y});const p="h",h="n",L="l",U="a",x="m",G=e=>e.debugLabel||e.toString(),q=([e,n])=>Object.fromEntries(n.flatMap(t=>{var s,r;const o=(s=e[x])==null?void 0:s.call(e,t);if(!o)return[];const c=o.t,a=((r=e[U])==null?void 0:r.call(e,t))||{};return[[G(t),{..."e"in a&&{error:a.e},..."p"in a&&{promise:a.p},..."v"in a&&{value:a.v},dependents:Array.from(c).map(G)}]]})),re=$("useAtomsDebugValue",e=>{var n;const t=(n=e==null?void 0:e.enabled)!=null?n:!1,s=I(e==null?void 0:e.scope),{s:r}=M(s),[o,c]=R([]);_(()=>{var a;if(!t)return;const f=()=>{var d;c(Array.from(((d=r[L])==null?void 0:d.call(r))||[]))},D=(a=r[h])==null?void 0:a.call(r,f);return f(),D},[t,r]),j([r,o],q)});function W(e,n,t){(typeof n=="string"||typeof t<"u")&&(console.warn("DEPRECATED [useAtomDevtools] use DevtoolOptions"),n={name:n,scope:t});const{enabled:s,name:r,scope:o}=n||{};let c;try{c=(s!=null?s:!1)&&window.__REDUX_DEVTOOLS_EXTENSION__}catch{}const[a,f]=k(e,o),D=m(a),d=m(!1),l=m(),A=r||e.debugLabel||e.toString();_(()=>{if(!c)return;const i=u=>{if(typeof f=="function"){f(u);return}console.warn(`[Warn] you cannot do write operations (Time-travelling, etc) in read-only atoms
`,e)};l.current=c.connect({name:A});const v=l.current.subscribe(u=>{var E,S,y,T,N,g;if(u.type==="ACTION"&&u.payload)try{i(JSON.parse(u.payload))}catch(w){console.error(`please dispatch a serializable value that JSON.parse() support
`,w)}else u.type==="DISPATCH"&&u.state?(((E=u.payload)==null?void 0:E.type)==="JUMP_TO_ACTION"||((S=u.payload)==null?void 0:S.type)==="JUMP_TO_STATE")&&(d.current=!0,i(JSON.parse(u.state))):u.type==="DISPATCH"&&((y=u.payload)==null?void 0:y.type)==="COMMIT"?(T=l.current)==null||T.init(D.current):u.type==="DISPATCH"&&((N=u.payload)==null?void 0:N.type)==="IMPORT_STATE"&&(((g=u.payload.nextLiftedState)==null?void 0:g.computedStates)||[]).forEach(({state:w},z)=>{var b;z===0?(b=l.current)==null||b.init(w):i(w)})});return l.current.shouldInit=!0,v},[e,c,A,f]),_(()=>{!l.current||(D.current=a,l.current.shouldInit?(l.current.init(a),l.current.shouldInit=!1):d.current?d.current=!1:l.current.send(`${A} - ${new Date().toLocaleString()}`,a))},[e,c,A,a])}const F=(e,n)=>e.size===n.size&&Array.from(e).every(([t,s])=>Object.is(n.get(t),s)),K=(e,n)=>e.size===n.size&&Array.from(e).every(([t,s])=>{const r=n.get(t);return r&&s.size===r.size&&Array.from(s).every(o=>r.has(o))});function Q(e){const n=I(e),t=M(n).s,[s,r]=R(()=>({values:new Map,dependents:new Map}));return _(()=>{if(!t[h])return;let o=new Map,c=new Map;const a=new Set,f=()=>{const d=new Map,l=new Map;let A=!1;for(const i of t[L]()||[]){const v=t[U](i);if(v){if(!v.y){if("p"in v)return;a.has(i)||(a.add(i),A=!0)}"v"in v&&d.set(i,v.v)}const u=t[x](i);u&&l.set(i,u.t)}A||F(o,d)&&K(c,l)||(o=d,c=l,a.clear(),r({values:d,dependents:l}))},D=t[h](f);return f(),D},[t]),s}function Y(e){const n=I(e),{s:t,w:s}=M(n);return V(r=>{if(!t[h])return;const o=c=>{s?s(a=>{t[p](c,a)}):t[p](c)};if(Z(r)){o(r);return}o(r.values)},[t,s])}const Z=e=>typeof e[Symbol.iterator]=="function",ee=(e,n)=>e.size===n.size&&Array.from(e).every(([t,s])=>Object.is(n.get(t),s)),te=(e,n)=>e.size===n.size&&Array.from(e).every(([t,s])=>{const r=n.get(t);return r&&s.size===r.size&&Array.from(s).every(o=>r.has(o))}),J=e=>e.debugLabel?`${e}:${e.debugLabel}`:`${e}`,H=e=>{const n={};e.values.forEach((s,r)=>{n[J(r)]=s});const t={};return e.dependents.forEach((s,r)=>{t[J(r)]=Array.from(s).map(J)}),{values:n,dependents:t}};function ne(e,n){typeof n<"u"&&typeof n!="object"&&(console.warn("DEPRECATED [useAtomsDevtools] use DevtoolsOptions"),n={scope:n});const{enabled:t,scope:s}=n||{},r=I(s),{s:o,w:c}=M(r);let a;try{a=(t!=null?t:!1)&&window.__REDUX_DEVTOOLS_EXTENSION__}catch{}if(a&&!o[h])throw new Error("useAtomsDevtools can only be used in dev mode.");const[f,D]=R(()=>({values:new Map,dependents:new Map}));_(()=>{var u;if(!a)return;let E=new Map,S=new Map;const y=new Set,T=()=>{var g,w,z;const b=new Map,P=new Map;let X=!1;for(const O of((g=o[L])==null?void 0:g.call(o))||[]){const C=(w=o[U])==null?void 0:w.call(o,O);if(C){if(!C.y){if("p"in C)return;y.has(O)||(y.add(O),X=!0)}"v"in C&&b.set(O,C.v)}const B=(z=o[x])==null?void 0:z.call(o,O);B&&P.set(O,B.t)}X||ee(E,b)&&te(S,P)||(E=b,S=P,y.clear(),D({values:b,dependents:P}))},N=(u=o[h])==null?void 0:u.call(o,T);return T(),N},[a,o]);const d=V(u=>{const{values:E}=u;c?c(S=>{o[p](E,S)}):o[p](E)},[o,c]),l=m(!1),A=m(!0),i=m(),v=m([]);_(()=>{if(!a)return;const u=(y=v.current.length-1)=>{const T=v.current[y>=0?y:0];if(!T)throw new Error("snaphost index out of bounds");return T},E=a.connect({name:e}),S=E.subscribe(y=>{var T;switch(y.type){case"DISPATCH":switch((T=y.payload)==null?void 0:T.type){case"RESET":break;case"COMMIT":E.init(H(u())),v.current=[];break;case"JUMP_TO_ACTION":case"JUMP_TO_STATE":l.current=!0,d(u(y.payload.actionId-1));break;case"PAUSE_RECORDING":A.current=!A.current;break}}});return i.current=E,i.current.shouldInit=!0,S},[a,d,e]),_(()=>{if(i.current){if(i.current.shouldInit){i.current.init(void 0),i.current.shouldInit=!1;return}l.current?l.current=!1:A.current&&(v.current.push(f),i.current.send({type:`${v.current.length}`,updatedAt:new Date().toLocaleString()},H(f)))}},[f])}}}});
